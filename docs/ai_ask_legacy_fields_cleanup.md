# ai_ask é—ç•™å­—æ®µæ¸…ç†ä¸ç¼–è¾‘å™¨å¢å¼º

## æ¸…ç†èƒŒæ™¯

åœ¨ç»Ÿä¸€åŒ–é‡æ„åï¼Œé¡¹ç›®ä¸­ä»å­˜åœ¨å¤§é‡ä½¿ç”¨ `target_variable` å’Œ `extraction_prompt` é—ç•™å­—æ®µçš„ä»£ç å’Œæ–‡æ¡£ã€‚ä¸ºäº†ä¿æŒä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œéœ€è¦ï¼š

1. **æ¸…ç†ä»£ç ä¸­çš„é—ç•™å­—æ®µå¼•ç”¨**
2. **æ›´æ–°ç¼–è¾‘å™¨UIï¼Œå¼ºåŒ– `output` æ•°ç»„çš„å¯è§†åŒ–æ˜¾ç¤º**
3. **æ›´æ–°æµ‹è¯•è„šæœ¬å’Œç¤ºä¾‹**

## å®Œæˆçš„å·¥ä½œ

### 1. ç¼–è¾‘å™¨ UI é‡æ„ âœ…

#### æ–‡ä»¶ï¼š`packages/script-editor/src/components/ActionPropertyPanel/index.tsx`

**ç§»é™¤çš„å†…å®¹**ï¼š
- âŒ "Target Variable" è¾“å…¥æ¡†
- âŒ "Extraction Prompt" æ–‡æœ¬æ¡†
- âŒ ç›¸å…³çš„è¡¨å•å­—æ®µå’Œå€¼å¤„ç†

**æ–°å¢çš„åŠŸèƒ½**ï¼š

1. **ä¼˜åŒ–å¸ƒå±€**ï¼šå°†å­—æ®µé‡æ–°ç»„ç»‡ä¸ºæ›´ç´§å‡‘çš„ 3 åˆ—å¸ƒå±€
   ```tsx
   <Row gutter={16}>
     <Col span={8}>Tone Style</Col>
     <Col span={8}>Max Rounds</Col>
     <Col span={8}>Required</Col>
   </Row>
   ```

2. **å¼ºåŒ– Output é…ç½®åŒºåŸŸ**ï¼š
   - ä¸­æ–‡æ ‡é¢˜ï¼š"å˜é‡æå–é…ç½®ï¼ˆOutputï¼‰"
   - æ·»åŠ è¯´æ˜æ–‡å­—ï¼š"é…ç½®éœ€è¦ä»ç”¨æˆ·å›ç­”ä¸­æå–çš„å˜é‡ï¼Œæ”¯æŒæå–å•ä¸ªæˆ–å¤šä¸ªå˜é‡"
   - æ¯ä¸ªå˜é‡å¡ç‰‡æ˜¾ç¤ºåºå·å’ŒçŠ¶æ€æ ‡ç­¾ï¼ˆå•å˜é‡/å¤šå˜é‡ï¼‰
   
3. **æ”¹è¿›çš„å˜é‡å¡ç‰‡è®¾è®¡**ï¼š
   ```tsx
   <Card
     title={
       <Space>
         <Text strong>å˜é‡ #{index + 1}</Text>
         {fields.length === 1 && <Tag color="blue">å•å˜é‡</Tag>}
         {fields.length > 1 && <Tag color="green">å¤šå˜é‡</Tag>}
       </Space>
     }
   >
     <Form.Item 
       label="å˜é‡åï¼ˆgetï¼‰"
       rules={[{ required: true }]}
       tooltip="éœ€è¦æå–çš„å˜é‡åç§°"
     >
       <Input placeholder="ä¾‹ï¼šç”¨æˆ·å§“åã€ç—‡çŠ¶æè¿°" />
     </Form.Item>
     <Form.Item 
       label="å˜é‡å®šä¹‰ï¼ˆdefineï¼‰"
       tooltip="å¸®åŠ© AI ç†è§£å¦‚ä½•æå–è¯¥å˜é‡çš„æè¿°"
     >
       <TextArea rows={2} placeholder="ä¾‹ï¼šä»ç”¨æˆ·å›å¤ä¸­æå–å§“åæˆ–æ˜µç§°" />
     </Form.Item>
   </Card>
   ```

4. **ç©ºçŠ¶æ€æç¤º**ï¼š
   - å½“æ²¡æœ‰é…ç½®å˜é‡æ—¶ï¼Œæ˜¾ç¤ºå‹å¥½çš„ç©ºçŠ¶æ€æç¤º
   - å¼•å¯¼ç”¨æˆ·æ·»åŠ å˜é‡é…ç½®

5. **é˜²æŠ¤æœºåˆ¶**ï¼š
   - ç¦æ­¢åˆ é™¤å”¯ä¸€çš„å˜é‡ï¼ˆè‡³å°‘ä¿ç•™ä¸€ä¸ªï¼‰
   - å˜é‡åå¿…å¡«éªŒè¯

**UI æˆªå›¾ç¤ºæ„**ï¼š
```
â”Œâ”€ ai_ask Action å±æ€§é¢æ¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚ ğŸ“ Question Template                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ [æ–‡æœ¬æ¡†ï¼Œ6è¡Œ]                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ â”‚ Tone  â”‚ Max   â”‚ Req'd â”‚                  â”‚
â”‚ â”‚ Style â”‚ Roundsâ”‚   â˜‘   â”‚                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                             â”‚
â”‚ ğŸ“¤ Exit Condition                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ [æ–‡æœ¬æ¡†ï¼Œ2è¡Œ]                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ â”€ å˜é‡æå–é…ç½®ï¼ˆOutputï¼‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚ é…ç½®éœ€è¦ä»ç”¨æˆ·å›ç­”ä¸­æå–çš„å˜é‡ï¼Œæ”¯æŒå•ä¸ª  â”‚
â”‚ æˆ–å¤šä¸ªå˜é‡                                  â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€ å˜é‡ #1 â”€â”€â”€â”€â”€[å•å˜é‡]â”€â”€â”€â”€â”€â”€â”€â”€ [Ã—] â”    â”‚
â”‚ â”‚ å˜é‡åï¼ˆgetï¼‰                       â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚ â”‚ â”‚ [ä¾‹ï¼šç”¨æˆ·å§“åã€ç—‡çŠ¶æè¿°]       â”‚  â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚ â”‚ å˜é‡å®šä¹‰ï¼ˆdefineï¼‰                 â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚ â”‚ â”‚ [ä¾‹ï¼šä»ç”¨æˆ·å›å¤ä¸­æå–å§“å]     â”‚  â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ [+ æ·»åŠ è¾“å‡ºå˜é‡]                            â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æµ‹è¯•è„šæœ¬æ›´æ–° âœ…

#### æ–‡ä»¶ï¼š`packages/api-server/update-sample-script.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
{
  action_type: 'ai_ask',
  action_id: 'ask_name',
  config: {
    target_variable: 'user_name',
    question_template: 'å¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„åå­—å—ï¼Ÿ',
    extraction_prompt: 'ä»ç”¨æˆ·çš„å›å¤ä¸­æå–ç”¨æˆ·çš„åå­—æˆ–æ˜µç§°',
    required: true,
    max_rounds: 3,
  },
}
```

**ä¿®æ”¹å**ï¼š
```typescript
{
  action_type: 'ai_ask',
  action_id: 'ask_name',
  config: {
    question_template: 'å¯ä»¥å‘Šè¯‰æˆ‘ä½ çš„åå­—å—ï¼Ÿ',
    exit: 'ç”¨æˆ·æä¾›äº†å§“åæˆ–æ˜µç§°',
    required: true,
    max_rounds: 3,
    output: [
      {
        get: 'user_name',
        define: 'ä»ç”¨æˆ·çš„å›å¤ä¸­æå–ç”¨æˆ·çš„åå­—æˆ–æ˜µç§°',
      },
    ],
  },
}
```

**å…³é”®å˜æ›´**ï¼š
- âœ… ç§»é™¤ `target_variable` å’Œ `extraction_prompt`
- âœ… æ·»åŠ  `output` æ•°ç»„é…ç½®
- âœ… æ·»åŠ  `exit` æ¡ä»¶ï¼ˆæ¨¡æ¿æ¨¡å¼éœ€è¦ï¼‰
- âœ… `extraction_prompt` å†…å®¹ç§»åˆ° `output[0].define`

#### æ–‡ä»¶ï¼š`packages/api-server/test-import-api.ts`

åŒæ ·çš„æ¨¡å¼ï¼Œæ›´æ–°äº†æµ‹è¯•è„šæœ¬ä¸­çš„ YAML å†…å®¹ï¼š

**ä¿®æ”¹å‰**ï¼š
```yaml
- action_type: "ai_ask"
  action_id: "ask_help"
  config:
    target_variable: "user_need"
    question_template: "è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"
    extraction_prompt: "æå–ç”¨æˆ·çš„ä¸»è¦éœ€æ±‚"
    required: true
    max_rounds: 3
```

**ä¿®æ”¹å**ï¼š
```yaml
- action_type: "ai_ask"
  action_id: "ask_help"
  config:
    question_template: "è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"
    exit: "ç”¨æˆ·æè¿°äº†ä¸»è¦éœ€æ±‚"
    required: true
    max_rounds: 3
    output:
      - get: "user_need"
        define: "æå–ç”¨æˆ·çš„ä¸»è¦éœ€æ±‚"
```

### 3. å‰©ä½™çš„é—ç•™å¼•ç”¨

ä»¥ä¸‹æ–‡ä»¶ä»åŒ…å« `target_variable` / `extraction_prompt` å¼•ç”¨ï¼Œä½†**ä¸éœ€è¦ä¿®æ”¹**ï¼š

#### ä¿ç•™åŸå› è¯´æ˜

1. **æ•°æ®åº“è¿ç§»è„šæœ¬**ï¼ˆå†å²è®°å½•ï¼Œä¸åº”ä¿®æ”¹ï¼‰ï¼š
   - `packages/api-server/fix-action1-v2.ts`
   - `packages/api-server/force-update-v3.ts`
   - `packages/api-server/temp-script.yaml`
   - `packages/api-server/update-script-files.ts`

2. **å…¼å®¹æ€§æµ‹è¯•**ï¼ˆéªŒè¯å‘åå…¼å®¹æ€§ï¼‰ï¼š
   - `packages/api-server/test-new-config-import.ts`
   - `packages/api-server/verify-script.ts`

3. **æ ¸å¿ƒå¼•æ“**ï¼ˆä¿ç•™å‘åå…¼å®¹æ”¯æŒï¼‰ï¼š
   - `packages/core-engine/src/actions/ai-ask-action.ts`
   - ä¿ç•™å¯¹ `target_variable` çš„è¯»å–æ”¯æŒ
   - ç”¨äºå‘åå…¼å®¹æ—§è„šæœ¬

4. **æ–‡æ¡£**ï¼ˆè®°å½•å†å²å’Œè¿ç§»æŒ‡å—ï¼‰ï¼š
   - `docs/ai_ask_output_unification_refactor.md`
   - è®°å½•é‡æ„å†å²å’Œè¿ç§»æ–¹æ³•

## æŠ€æœ¯ç»†èŠ‚

### ç¼–è¾‘å™¨æ•°æ®æµ

**è¡¨å•åˆå§‹åŒ–**ï¼š
```typescript
React.useEffect(() => {
  if (action && action.type === 'ai_ask') {
    const formValues = {
      ai_ask: action.ai_ask,
      tone: action.tone || '',
      exit: action.exit || '',
      tolist: action.tolist || '',
      question_template: action.question_template || action.ai_ask,
      required: action.required ?? false,
      max_rounds: action.max_rounds ?? 3,
      output: action.output || [],  // ç›´æ¥ä½¿ç”¨ output æ•°ç»„
    };
    form.setFieldsValue(formValues);
  }
}, [action, form]);
```

**è¡¨å•ä¿å­˜**ï¼š
```typescript
if (action.type === 'ai_ask') {
  Object.assign(updatedAction, {
    ai_ask: values.ai_ask,
    tone: values.tone || undefined,
    exit: values.exit || undefined,
    tolist: values.tolist || undefined,
    question_template: values.question_template || values.ai_ask,
    required: values.required,
    max_rounds: values.max_rounds,
    output: values.output || undefined,  // åªä¿å­˜ output
  });
}
```

**å…³é”®æ”¹è¿›**ï¼š
- âŒ ç§»é™¤äº† `target_variable` å’Œ `extraction_prompt` çš„è¯»å–å’Œå†™å…¥
- âœ… ç®€åŒ–äº†æ•°æ®æµï¼Œé¿å…å­—æ®µè½¬æ¢
- âœ… ç›´æ¥æ“ä½œ `output` æ•°ç»„

### Form.List åŠ¨æ€è¡¨å•

ä½¿ç”¨ Ant Design çš„ `Form.List` å®ç°åŠ¨æ€å¢åˆ å˜é‡ï¼š

```tsx
<Form.List name="output">
  {(fields, { add, remove }) => (
    <>
      {fields.map((field, index) => (
        <Card key={field.key}>
          <Form.Item name={[field.name, 'get']} />
          <Form.Item name={[field.name, 'define']} />
        </Card>
      ))}
      <Button onClick={() => add()}>æ·»åŠ </Button>
    </>
  )}
</Form.List>
```

**ç‰¹æ€§**ï¼š
- è‡ªåŠ¨ç®¡ç†è¡¨å•æ•°ç»„çŠ¶æ€
- æ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤
- æ¯ä¸ªå­—æ®µç‹¬ç«‹éªŒè¯
- åºåˆ—åŒ–ä¸ºæ­£ç¡®çš„æ•°ç»„æ ¼å¼

## ç”¨æˆ·ä½“éªŒæå‡

### 1. æ›´æ¸…æ™°çš„è§†è§‰å±‚æ¬¡

**ä¹‹å‰**ï¼š
- Target Variable å’Œ Extraction Prompt å¹³é“ºåœ¨è¡¨å•ä¸­
- ä¸æ˜æ˜¾çš„å•/å¤šå˜é‡åŒºåˆ†
- è‹±æ–‡æ ‡ç­¾ï¼Œç†è§£æˆæœ¬é«˜

**ç°åœ¨**ï¼š
- ç‹¬ç«‹çš„"å˜é‡æå–é…ç½®"åŒºåŸŸ
- æ¯ä¸ªå˜é‡æœ‰è‡ªå·±çš„å¡ç‰‡
- æ˜ç¡®çš„å•å˜é‡/å¤šå˜é‡æ ‡ç­¾
- ä¸­æ–‡æ ‡ç­¾å’Œæç¤ºï¼Œé™ä½ç†è§£æˆæœ¬

### 2. æ›´å¥½çš„å¼•å¯¼

**æ·»åŠ çš„æç¤ºä¿¡æ¯**ï¼š
- "é…ç½®éœ€è¦ä»ç”¨æˆ·å›ç­”ä¸­æå–çš„å˜é‡ï¼Œæ”¯æŒæå–å•ä¸ªæˆ–å¤šä¸ªå˜é‡"
- å ä½ç¬¦ç¤ºä¾‹ï¼š"ä¾‹ï¼šç”¨æˆ·å§“åã€ç—‡çŠ¶æè¿°"
- Tooltip æç¤ºï¼š"å¸®åŠ© AI ç†è§£å¦‚ä½•æå–è¯¥å˜é‡çš„æè¿°"

### 3. é˜²é”™è®¾è®¡

**å®‰å…¨ä¿æŠ¤**ï¼š
- è‡³å°‘ä¿ç•™ä¸€ä¸ªå˜é‡ï¼ˆç¦ç”¨å”¯ä¸€åˆ é™¤æŒ‰é’®ï¼‰
- å˜é‡åå¿…å¡«éªŒè¯
- ç©ºçŠ¶æ€å‹å¥½æç¤º

## æ„å»ºéªŒè¯

### ç¼–è¾‘å™¨æ„å»º

```bash
pnpm --filter script-editor build
```

**ç»“æœ**ï¼šâœ… æ„å»ºæˆåŠŸ
```
âœ“ 3134 modules transformed.
dist/index.html                     0.47 kB
dist/assets/index-BEJI9rSW.css     10.11 kB
dist/assets/index-D8VAASQd.js   1,186.48 kB
âœ“ built in 24.34s
```

### æ ¸å¿ƒå¼•æ“æ„å»º

ä¹‹å‰å·²é€šè¿‡ï¼š
```bash
pnpm --filter core-engine build
âœ“ Build success in 42ms
```

### å•å…ƒæµ‹è¯•

ä¹‹å‰å·²é€šè¿‡ï¼š
```bash
pnpm test test/output-list
âœ“ 4 tests passed
```

## å½±å“èŒƒå›´æ€»ç»“

### âœ… å·²æ›´æ–°çš„æ–‡ä»¶

1. **ç¼–è¾‘å™¨ UI**ï¼š
   - `packages/script-editor/src/components/ActionPropertyPanel/index.tsx`

2. **æµ‹è¯•è„šæœ¬**ï¼š
   - `packages/api-server/update-sample-script.ts`
   - `packages/api-server/test-import-api.ts`

3. **æ–‡æ¡£**ï¼š
   - `docs/ai_ask_output_unification_refactor.md`ï¼ˆä¹‹å‰åˆ›å»ºï¼‰
   - `docs/ai_ask_output_list_feature.md`ï¼ˆä¹‹å‰æ›´æ–°ï¼‰

### â¸ï¸ ä¿ç•™çš„æ–‡ä»¶ï¼ˆå‘åå…¼å®¹ï¼‰

1. **å†å²è¿ç§»è„šæœ¬**ï¼ˆä¸åº”ä¿®æ”¹ï¼‰
2. **å…¼å®¹æ€§æµ‹è¯•**ï¼ˆéªŒè¯å‘åå…¼å®¹ï¼‰
3. **æ ¸å¿ƒå¼•æ“**ï¼ˆä¿ç•™å‘åå…¼å®¹æ”¯æŒï¼‰

### ğŸ”„ ä¸‹ä¸€æ­¥å»ºè®®

1. **é€æ­¥è¿ç§»ç°æœ‰è„šæœ¬**ï¼š
   - ä½¿ç”¨ `update-sample-script.ts` æ›´æ–°æ•°æ®åº“ä¸­çš„ç¤ºä¾‹è„šæœ¬
   - é€šçŸ¥ç”¨æˆ·æ›´æ–°ä»–ä»¬çš„è‡ªå®šä¹‰è„šæœ¬

2. **æ ‡è®°åºŸå¼ƒå­—æ®µ**ï¼š
   - åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ·»åŠ  `@deprecated` æ³¨é‡Š
   - åœ¨æ–‡æ¡£ä¸­æ ‡è®°ä¸º"ä¸æ¨èä½¿ç”¨"

3. **ç›‘æ§ä½¿ç”¨æƒ…å†µ**ï¼š
   - æ·»åŠ æ—¥å¿—ï¼Œç›‘æ§æ—§å­—æ®µçš„ä½¿ç”¨æƒ…å†µ
   - ä¸ºè¿ç§»å‡†å¤‡æ•°æ®

## è¿ç§»æŒ‡å—ï¼ˆç»™ç”¨æˆ·ï¼‰

### å¦‚ä½•æ›´æ–°ç°æœ‰çš„ ai_ask é…ç½®

**æ­¥éª¤1ï¼šè¯†åˆ«æ—§é…ç½®**
```yaml
# æ—§é…ç½®
- action_type: "ai_ask"
  config:
    target_variable: "user_name"
    extraction_prompt: "æå–ç”¨æˆ·å"
```

**æ­¥éª¤2ï¼šè½¬æ¢ä¸ºæ–°é…ç½®**
```yaml
# æ–°é…ç½®
- action_type: "ai_ask"
  config:
    exit: "ç”¨æˆ·æä¾›äº†å§“å"  # æ–°å¢
    output:                    # æ–°å¢
      - get: "user_name"
        define: "æå–ç”¨æˆ·å"
```

**æ­¥éª¤3ï¼šåœ¨ç¼–è¾‘å™¨ä¸­éªŒè¯**
1. æ‰“å¼€è„šæœ¬ç¼–è¾‘å™¨
2. é€‰æ‹© ai_ask action
3. åœ¨å³ä¾§å±æ€§é¢æ¿ä¸­æŸ¥çœ‹"å˜é‡æå–é…ç½®ï¼ˆOutputï¼‰"åŒºåŸŸ
4. ç¡®è®¤å˜é‡æ­£ç¡®æ˜¾ç¤º

## æ€»ç»“

æœ¬æ¬¡æ¸…ç†å·¥ä½œå®Œæˆäº†ä»¥ä¸‹ç›®æ ‡ï¼š

1. âœ… **ç¼–è¾‘å™¨ç°ä»£åŒ–**ï¼šç§»é™¤é—ç•™å­—æ®µï¼Œå¼ºåŒ– output æ•°ç»„çš„å¯è§†åŒ–
2. âœ… **ä»£ç ä¸€è‡´æ€§**ï¼šæ›´æ–°æµ‹è¯•è„šæœ¬ï¼Œä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ–¹å¼
3. âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šæ›´æ¸…æ™°çš„å¸ƒå±€ã€æ›´å¥½çš„å¼•å¯¼ã€æ›´å‹å¥½çš„æç¤º
4. âœ… **å‘åå…¼å®¹**ï¼šä¿ç•™æ ¸å¿ƒå¼•æ“çš„å…¼å®¹æ€§æ”¯æŒ
5. âœ… **æ„å»ºéªŒè¯**ï¼šæ‰€æœ‰æ„å»ºå’Œæµ‹è¯•é€šè¿‡

**ç»Ÿä¸€åŒ–é‡æ„ç°å·²å®Œæˆ**ï¼Œé¡¹ç›®å…¨é¢é‡‡ç”¨ `output` æ•°ç»„é…ç½®æ–¹å¼ï¼

---

**æ›´æ–°æ—¶é—´**ï¼š2026-01-22  
**ç›¸å…³æ–‡æ¡£**ï¼š
- [å˜é‡é—­ç¯ç»Ÿä¸€åŒ–é‡æ„æ€»ç»“](./ai_ask_output_unification_refactor.md)
- [ai_ask å¤šå˜é‡è¾“å‡ºåŠŸèƒ½è¯´æ˜](./ai_ask_output_list_feature.md)
