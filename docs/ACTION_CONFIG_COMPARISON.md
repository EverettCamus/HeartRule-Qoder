# Actioné…ç½®é¡¹å¯¹æ¯” - æ–°æ—§ç‰ˆæœ¬

## ai_say åŠ¨ä½œç±»å‹å¯¹æ¯”

### æ—§ç‰ˆé…ç½®ï¼ˆæ›´æ–°å‰ï¼‰
```yaml
- action_type: "ai_say"
  action_id: "welcome"
  config:
    content_template: "æ¬¢è¿æ¥åˆ°å¿ƒç†å’¨è¯¢å®¤"
    tone: "warm"
```

### æ–°ç‰ˆé…ç½®ï¼ˆæ›´æ–°åï¼‰
```yaml
- action_type: "ai_say"
  action_id: "welcome"
  config:
    content_template: "æ¬¢è¿æ¥åˆ°å¿ƒç†å’¨è¯¢å®¤"
    tone: "warm"
    require_acknowledgment: true  # ğŸ†• éœ€è¦ç”¨æˆ·ç¡®è®¤
    max_rounds: 1                 # ğŸ†• æœ€å¤§è½®æ•°
```

### å¯è§†åŒ–ç¼–è¾‘å™¨ç•Œé¢å¯¹æ¯”

#### æ—§ç‰ˆç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action Property Settings            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prompt Content                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ¬¢è¿æ¥åˆ°å¿ƒç†å’¨è¯¢å®¤              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ Tone Style                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ warm                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ–°ç‰ˆç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action Property Settings            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prompt Content                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ¬¢è¿æ¥åˆ°å¿ƒç†å’¨è¯¢å®¤              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ Tone Style                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ warm                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Require     â”‚ Max Rounds   ğŸ†•â”‚  â”‚
â”‚ â”‚ Acknowledgmâ€¦â”‚ â”Œâ”€â”€â”          â”‚  â”‚
â”‚ â”‚ [ON] ğŸ†•     â”‚ â”‚1 â”‚          â”‚  â”‚
â”‚ â”‚             â”‚ â””â”€â”€â”˜          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ai_ask åŠ¨ä½œç±»å‹å¯¹æ¯”

### æ—§ç‰ˆé…ç½®ï¼ˆæ›´æ–°å‰ï¼‰
```yaml
- action_type: "ai_ask"
  action_id: "ask_name"
  config:
    content_template: "è¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—"
    exit: "è·å–åˆ°å§“å"
```

### æ–°ç‰ˆé…ç½®ï¼ˆæ›´æ–°åï¼‰
```yaml
- action_type: "ai_ask"
  action_id: "ask_name"
  config:
    question_template: "è¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—"    # ğŸ†• æ›´è¯­ä¹‰åŒ–çš„å­—æ®µå
    target_variable: "user_name"            # ğŸ†• ç›®æ ‡å˜é‡
    extraction_prompt: "æå–ç”¨æˆ·çš„å§“å"     # ğŸ†• æå–è§„åˆ™
    required: true                          # ğŸ†• æ˜¯å¦å¿…å¡«
    max_rounds: 3                           # ğŸ†• æœ€å¤§è½®æ•°
    exit: "è·å–åˆ°å§“å"
```

### å¯è§†åŒ–ç¼–è¾‘å™¨ç•Œé¢å¯¹æ¯”

#### æ—§ç‰ˆç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action Property Settings            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prompt Content                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ Exit Condition                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è·å–åˆ°å§“å                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ–°ç‰ˆç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action Property Settings            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Question Template ğŸ†•                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¯·å‘Šè¯‰æˆ‘ä½ çš„åå­—                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Target        â”‚ Required     ğŸ†•â”‚ â”‚
â”‚ â”‚Variable   ğŸ†• â”‚ [âœ“]            â”‚ â”‚
â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                â”‚ â”‚
â”‚ â”‚â”‚user_name  â”‚ â”‚                â”‚ â”‚
â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ Extraction Prompt ğŸ†•                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æå–ç”¨æˆ·çš„å§“å                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Tone Style    â”‚ Max Rounds   ğŸ†•â”‚ â”‚
â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”          â”‚ â”‚
â”‚ â”‚â”‚           â”‚ â”‚ â”‚3 â”‚          â”‚ â”‚
â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”˜          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ Exit Condition                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è·å–åˆ°å§“å                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åŠŸèƒ½å¢å¼ºæ€»ç»“

### ai_say æ–°å¢èƒ½åŠ›
| åŠŸèƒ½ | è¯´æ˜ | é»˜è®¤å€¼ | ç”¨é€” |
|------|------|--------|------|
| require_acknowledgment | éœ€è¦ç”¨æˆ·ç¡®è®¤ | true | æ§åˆ¶æ˜¯å¦ç­‰å¾…ç”¨æˆ·å“åº” |
| max_rounds | æœ€å¤§è½®æ•° | 1 | é™åˆ¶äº¤äº’æ¬¡æ•° |

### ai_ask æ–°å¢èƒ½åŠ›
| åŠŸèƒ½ | è¯´æ˜ | é»˜è®¤å€¼ | ç”¨é€” |
|------|------|--------|------|
| question_template | é—®é¢˜æ¨¡æ¿ | - | æ›´è¯­ä¹‰åŒ–çš„å­—æ®µå |
| target_variable | ç›®æ ‡å˜é‡ | - | æŒ‡å®šæå–å˜é‡å |
| extraction_prompt | æå–è§„åˆ™ | - | æŒ‡å¯¼ä¿¡æ¯æå– |
| required | æ˜¯å¦å¿…å¡« | false | æ ‡è®°å¿…ç­”é—®é¢˜ |
| max_rounds | æœ€å¤§è½®æ•° | 3 | é™åˆ¶æé—®æ¬¡æ•° |

---

## å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1: å…³é”®ä¿¡æ¯å‘ŠçŸ¥

**éœ€æ±‚**: AIéœ€è¦å‘ŠçŸ¥ç”¨æˆ·é‡è¦çš„çŸ¥æƒ…åŒæ„å†…å®¹ï¼Œå¿…é¡»ç­‰å¾…ç”¨æˆ·æ˜ç¡®ç¡®è®¤

```yaml
- action_type: "ai_say"
  action_id: "informed_consent"
  config:
    content_template: |
      åœ¨å¼€å§‹å’¨è¯¢å‰ï¼Œæˆ‘éœ€è¦å‘ŠçŸ¥æ‚¨ï¼š
      1. å’¨è¯¢å†…å®¹å°†è¢«ä¸¥æ ¼ä¿å¯†
      2. æ‚¨æœ‰æƒéšæ—¶ç»ˆæ­¢å’¨è¯¢
      3. AIåŠ©æ‰‹ä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç”Ÿè¯Šæ–­
    require_acknowledgment: true  # å¿…é¡»ç¡®è®¤
    max_rounds: 1
```

### åœºæ™¯2: å¿…å¡«ä¿¡æ¯æ”¶é›†

**éœ€æ±‚**: æ”¶é›†ç”¨æˆ·å§“åï¼Œè¿™æ˜¯å¿…éœ€ä¿¡æ¯ï¼Œå…è®¸å¤šæ¬¡å°è¯•

```yaml
- action_type: "ai_ask"
  action_id: "ask_name"
  config:
    question_template: "é¦–å…ˆï¼Œæˆ‘æƒ³çŸ¥é“è¯¥å¦‚ä½•ç§°å‘¼æ‚¨ï¼Ÿ"
    target_variable: "user_name"
    extraction_prompt: "æå–ç”¨æˆ·æä¾›çš„å§“åæˆ–æ˜µç§°"
    required: true        # å¿…å¡«
    max_rounds: 3         # æœ€å¤šé—®3æ¬¡
    exit: "æˆåŠŸè·å–ç”¨æˆ·ç§°å‘¼"
```

### åœºæ™¯3: å¤æ‚ä¿¡æ¯æå–

**éœ€æ±‚**: è¯¢é—®ç—‡çŠ¶ï¼ŒåŒæ—¶æå–æè¿°å’Œä¸¥é‡ç¨‹åº¦

```yaml
- action_type: "ai_ask"
  action_id: "ask_symptoms"
  config:
    question_template: "èƒ½è¯¦ç»†è¯´è¯´æ‚¨æœ€è¿‘çš„ç—‡çŠ¶å—ï¼Ÿ"
    output:
      - get: "symptom_description"
        define: "ç—‡çŠ¶çš„è¯¦ç»†æè¿°"
      - get: "severity_level"
        define: "ç—‡çŠ¶ä¸¥é‡ç¨‹åº¦ï¼ˆè½»åº¦/ä¸­åº¦/é‡åº¦ï¼‰"
    max_rounds: 5
    exit: "å®Œæ•´æ”¶é›†ç—‡çŠ¶ä¿¡æ¯"
```

---

## æ•°æ®æµè½¬ç¤ºæ„å›¾

```
YAMLæ–‡ä»¶
    â†“
    â†“ (è§£æ)
    â†“
å‰ç«¯æ•°æ®ç»“æ„
    â†“
    â†“ (è¡¨å•æ¸²æŸ“)
    â†“
å¯è§†åŒ–ç¼–è¾‘ç•Œé¢
    â†“
    â†“ (ç”¨æˆ·ç¼–è¾‘)
    â†“
è¡¨å•æ•°æ®
    â†“
    â†“ (è‡ªåŠ¨ä¿å­˜)
    â†“
å‰ç«¯æ•°æ®ç»“æ„
    â†“
    â†“ (è½¬æ¢)
    â†“
YAMLæ–‡ä»¶
```

æ¯ä¸ªç¯èŠ‚éƒ½å®Œæ•´æ”¯æŒæ–°é…ç½®é¡¹çš„åŒå‘ç»‘å®šï¼
